<!-- Insurance Form Component Template -->
<div class="insurance-form-container">
  <h2>Insurance Information Form</h2>
  
  <form [formGroup]="insuranceForm" (ngSubmit)="onSubmit()" novalidate>
    
    <!-- Yes/No Choice using mat-button-toggle-group -->
    <div class="form-field">
      <mat-label class="form-label">
        Do you currently have auto insurance?
        <span class="required">*</span>
      </mat-label>
      
      <mat-button-toggle-group 
        formControlName="currentInsuranceCoverage" 
        aria-label="Current Insurance Coverage"
        class="toggle-group">
        <mat-button-toggle value="yes" class="toggle-button">
          <span class="toggle-content">Yes</span>
        </mat-button-toggle>
        <mat-button-toggle value="no" class="toggle-button">
          <span class="toggle-content">No</span>
        </mat-button-toggle>
      </mat-button-toggle-group>
      
      <!-- Error message -->
      <mat-error *ngIf="insuranceForm.get('currentInsuranceCoverage')?.invalid && insuranceForm.get('currentInsuranceCoverage')?.touched">
        Please select Yes or No
      </mat-error>
    </div>

    <!-- Insurance Company Dropdown -->
    <div class="form-field">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Insurance Company</mat-label>
        <mat-select formControlName="insuranceCompany" placeholder="Select Insurance Company">
          <mat-option value="allstate">AllState Insurance Company</mat-option>
          <mat-option value="geico">GEICO Insurance</mat-option>
          <mat-option value="progressive">Progressive Insurance</mat-option>
        </mat-select>
        <mat-error *ngIf="insuranceForm.get('insuranceCompany')?.invalid && insuranceForm.get('insuranceCompany')?.touched">
          Please select an insurance company
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Years Insured Dropdown -->
    <div class="form-field">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Years Insured</mat-label>
        <mat-select formControlName="yearsInsured" placeholder="Select Years Insured">
          <mat-option value="1">1 year</mat-option>
          <mat-option value="2">2 years</mat-option>
          <mat-option value="3">3 years</mat-option>
          <mat-option value="4">4 years</mat-option>
          <mat-option value="5+">5+ years</mat-option>
        </mat-select>
        <mat-error *ngIf="insuranceForm.get('yearsInsured')?.invalid && insuranceForm.get('yearsInsured')?.touched">
          Please select years insured
        </mat-error>
      </mat-form-field>
    </div>

    <!-- BI Limits Dropdown -->
    <div class="form-field">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Bodily Injury Limits</mat-label>
        <mat-select formControlName="biLimits" placeholder="Select BI Limits">
          <mat-option value="15/30">$15,000/$30,000</mat-option>
          <mat-option value="25/50">$25,000/$50,000</mat-option>
          <mat-option value="100/300">$100,000/$300,000</mat-option>
        </mat-select>
        <mat-error *ngIf="insuranceForm.get('biLimits')?.invalid && insuranceForm.get('biLimits')?.touched">
          Please select BI limits
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Continue Button -->
    <div class="form-actions">
      <button 
        mat-raised-button 
        color="primary" 
        type="submit"
        [disabled]="insuranceForm.invalid"
        class="continue-button">
        Continue
        <mat-icon>arrow_forward</mat-icon>
      </button>
    </div>

  </form>

  <!-- Debug Section (Optional) -->
  <div class="debug-section" *ngIf="showDebug">
    <h3>Form Debug Info</h3>
    <pre>{{ insuranceForm.value | json }}</pre>
    <pre>Form Valid: {{ insuranceForm.valid }}</pre>
    <pre>Form Touched: {{ insuranceForm.touched }}</pre>
  </div>
</div>
